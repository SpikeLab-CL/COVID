post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
file_list
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact/", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
file_list
file_list
file_list[0]
file_list[1]
file_list[2]
file_list[3]
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact/", pattern="*.feather")
for (file in file_list[1:]){
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact/", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
file_list
file_list
file_list
print(file_list)
file_list = list.files(path = "../data", pattern="*.feather")
print(file_list)
file_list = list.files(path = "../datos/input_causal_impact/", pattern="*.feather")
file_list
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
file_list
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
file_list
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
file_list
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
file_list
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
file_list
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
file_list
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = order(list.files(path = "../datos/input_causal_impact", pattern="*.feather"))
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
print(file_list)
file_list = order(list.files(path = "../datos/input_causal_impact", pattern="*.feather"))
print(file_list)
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
impact <- CausalImpact(data, pre.period, post.period, alpha = 0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep = " "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
paste("../datos/input_causal_impact/", file, sep="")
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
print(paste("../datos/input_causal_impact/", file, sep=""))
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(paste("../datos/input_causal_impact/", file, sep=""))
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep=""))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
print(path)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
print(df)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
region = df[1, "region"]
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
region = df[1, "region"]
print(region)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
region = df[1, "region"]
print(df)
print(region)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
print(df_red)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
print(df_red)
}
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
path <- paste("../datos/input_causal_impact/", file, sep="")
df = read_feather(path)
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$date)
print(df_red)
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$fecha)
impact <- CausalImpact(data, pre.period, post.period, alpha=0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep=" "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
pre.period <- as.POSIXct(c("2019-01-01", "2020-03-1"))
post.period <- as.POSIXct(c("2020-03-1", "2020-06-2"))
file_list = list.files(path = "../datos/input_causal_impact", pattern="*.feather")
for (file in file_list){
print(file)
df = read_feather(paste("../datos/input_causal_impact/", file, sep=""))
region = df[1, "region"]
df_red = df[ , grepl("x", names(df))]
df_red$y = df$y
data <- zoo(df_red, df$fecha)
impact <- CausalImpact(data, pre.period, post.period, alpha=0.1)
impact.plot <- plot(impact)
impact.plot <- impact.plot + theme_bw(base_size = 10) +
ggtitle(paste("Impacto de Covid para", region, sep=" "))
print(impact.plot)
summary = impact$summary
lower_abs = summary[2, 'AbsEffect.lower']
upper_abs = summary[2, 'AbsEffect.upper']
abs = summary[2, 'AbsEffect']
results = data.frame(effect=abs, lower_effect=lower_abs, upper_effect=upper_abs)
file_results = paste('results_', unlist(strsplit(file, '_'))[2], sep='')
write_feather(results, paste('../datos/output_causal_impact/', file_results, sep=''))
}
